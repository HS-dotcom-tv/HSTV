name: Update Matches
on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Get free football data
        run: |
          # استخدام API مجاني مختلف
          curl -s "https://api.football-data.org/v4/matches" \
          -H "X-Auth-Token: free_plan_token" \
          -o matches.json || echo '{"response":[]}' > matches.json
          
      - name: Commit changes
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git add matches.json
          git commit -m "Update matches" || exit 0
          git push
