<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HSTV - جداول المباريات</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* ---------------------------------------------------- */
    /* استيراد خطوط خاصة للشعار (هنا استخدمنا Exo 2 لمظهر رياضي) */
    /* ---------------------------------------------------- */
    @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@700&display=swap');

    :root {
        /* -- الوضع النهاري (مثالي) -- */
        --bg-gradient-start: #EFF6FF; --bg-gradient-end: #DBEAFE;
        --text-main: #1E293B; --text-secondary: #475569;
        --card-bg: rgba(255, 255, 255, 0.7); --card-hover-bg: rgba(255, 255, 255, 1);
        --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        --card-border: transparent; --btn-bg: #fff; --btn-text: #334155; --btn-border: #CBD5E1;
        --btn-active-gradient-start: #3B82F6; --btn-active-gradient-end: #2563EB;
        --btn-active-text: #fff; --header-text: #1E3A8A;
        --logo-color-main: #1E3A8A; /* لون الشعار الرئيسي في النهار */
        --logo-color-accent: #3B82F6; /* لون جزء الشعار المميز في النهار */
    }
    html.dark-mode {
        /* -- الوضع الليلي (Netflix المصقول) -- */
        --bg-gradient-start: #141414; --bg-gradient-end: #141414;
        --text-main: #fff; --text-secondary: #A3A3A3;
        --card-bg: #282828; --card-hover-bg: #333333;
        --card-shadow: 0 0 0 0 transparent; --card-border: #282828;
        --btn-bg: #2F2F2F; --btn-text: #fff; --btn-border: #4B5563;
        --btn-active-gradient-start: #B9090B; --btn-active-gradient-end: #990709;
        --btn-active-text: #fff; --header-text: #B9090B;
        --logo-color-main: #E5E7EB; /* لون الشعار الرئيسي في الليل */
        --logo-color-accent: #B9090B; /* لون جزء الشعار المميز في الليل */
    }
    
    body { 
        font-family: 'Cairo', sans-serif; 
        background-color: var(--bg-gradient-start);
        background-image: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end)); 
        min-height:100vh; color: var(--text-main);
        transition: background 0.4s ease, color 0.4s ease;
    }
    .match-card { 
        transition: all .2s ease-in-out; 
        background: var(--card-bg); border: 1px solid var(--card-border);
        box-shadow: var(--card-shadow); border-radius: 0.75rem;
    }
    html.dark-mode .match-card {
        backdrop-filter: none; border-radius: 0.25rem; border: none;
    }
    .match-card:hover { 
        transform: translateY(-5px); background: var(--card-hover-bg); 
    }
    html.dark-mode .match-card:hover {
        transform: scale(1.03) translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.5);
    }
    .btn-tab { 
        background: var(--btn-bg); color: var(--btn-text);
        border: 1px solid var(--btn-border);
        transition: all .2s ease; border-radius: 0.75rem;
    }
    .btn-tab.active { 
        background: linear-gradient(90deg, var(--btn-active-gradient-start), var(--btn-active-gradient-end)); 
        color: var(--btn-active-text); border: none;
        box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.1);
    }
    .header-main-title {
        font-family: 'Exo 2', sans-serif; /* تطبيق الخط الجديد هنا */
        color: var(--logo-color-main);
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    html.dark-mode .header-main-title {
        /* إزالة التدرج للنص الأحمر الصريح في الوضع الليلي */
        background: none;
        -webkit-background-clip: unset; 
    }
    .header-subtitle { color: var(--text-secondary); margin-top: -5px; font-size: 0.8rem;}
    /* ---------------------------------------------------- */
    /* تصميم شعار SVG الجديد (يستخدم متغيرات الألوان)      */
    /* ---------------------------------------------------- */
    .logo-svg {
        height: 40px; /* حجم الشعار */
        width: auto;
        fill: var(--logo-color-main); /* لون النص الافتراضي */
        transition: fill 0.3s ease;
    }
    .logo-svg .accent-path {
        fill: var(--logo-color-accent); /* لون الجزء المميز */
        transition: fill 0.3s ease;
    }
    .crest { 
        width: 50px; height: 50px; object-fit: contain; margin: auto;
        border-radius: 50%;
    }
    .score-box { font-size: 1.4rem; font-weight: 700; text-align:center; line-height: 1; color: var(--text-main);}
    .team-name { font-size: 0.85rem; font-weight: 600; text-align:center; line-height:1.2; word-break: break-word; }
    .status-text, .time-period, .match-details { color: var(--text-secondary); }
    .match-details { 
      border-top: 1px solid var(--card-border); 
      margin-top: 1rem; padding-top: 0.75rem;
      font-size: 0.75rem; font-weight: 400; 
      display: flex; justify-content: space-between; align-items: center;
    }
    .time-period { display: block; font-size: 0.7rem; font-weight: 400; opacity: 0.8; margin-top: 2px; }
    #theme-toggle {
        background: var(--btn-bg); border: 1px solid var(--btn-border);
        border-radius: 999px; padding: 0.5rem; color: var(--text-main);
        cursor: pointer; transition: all 0.2s ease;
    }
    #theme-toggle:hover { background: var(--card-hover-bg); }
  </style>
  
  <script>
    (function() {
      if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.classList.add('dark-mode');
      }
    })();
  </script>
</head>
<body class="p-4">
  <header class="flex justify-between items-center mb-6">
    <div class="flex items-center gap-3">
        <svg class="logo-svg" viewBox="0 0 150 40" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path class="accent-path" d="M10 20C10 9.5 19.5 0 30 0C40.5 0 50 9.5 50 20C50 30.5 40.5 40 30 40C19.5 40 10 30.5 10 20ZM30 2C20.625 2 12 10.125 12 20C12 29.875 20.625 38 30 38C39.375 38 48 29.875 48 20C48 10.125 39.375 2 30 2Z"/>
            <path class="accent-path" d="M52 20C52 16.6667 56 12 60 12C64 12 68 16.6667 68 20C68 23.3333 64 28 60 28C56 28 52 23.3333 52 20ZM60 14C57.6667 14 54 16.6667 54 20C54 23.3333 57.6667 26 60 26C62.3333 26 66 23.3333 66 20C66 16.6667 62.3333 14 60 14Z"/>
            <path d="M75 16H80V40H75V16ZM84 16H89V40H84V16ZM93 16H98V40H93V16ZM102 16H107V40H102V16ZM111 16H116V40H111V16ZM120 16H125V40H120V16ZM129 16H134V40H129V16ZM138 16H143V40H138V16ZM147 16H150V40H147V16Z" fill="url(#logoGradient)"/>
        </svg>
        <h1 class="header-main-title text-3xl">HSTV</h1>
        </div>
    <button id="theme-toggle" title="تغيير الوضع"></button>
  </header>
    <p class="header-subtitle mt-1 text-center">أهم مباريات اليوم والأمس والغد</p> <div class="max-w-3xl mx-auto mb-6">
    <div class="flex gap-3">
      <button id="yesterday" class="btn-tab flex-1 px-4 py-2">الأمس</button>
      <button id="today" class="btn-tab flex-1 px-4 py-2 active">اليوم</button>
      <button id="tomorrow" class="btn-tab flex-1 px-4 py-2">الغد</button>
    </div>
  </div>
  <main id="matches" class="max-w-3xl mx-auto space-y-4"></main>
  
  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>`;
    const moonIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>`;
    function updateIcon() { if (document.documentElement.classList.contains('dark-mode')) { themeToggle.innerHTML = sunIcon; } else { themeToggle.innerHTML = moonIcon; } }
    themeToggle.addEventListener('click', () => { document.documentElement.classList.toggle('dark-mode'); localStorage.setItem('theme', document.documentElement.classList.contains('dark-mode') ? 'dark' : 'light'); updateIcon(); });
    updateIcon();
    
    // باقي الكود بدون تغيير
    const API_URL = 'matches.json';
    const matchesContainer = document.getElementById('matches');
    const leagueTranslations = { 'PL': 'الدوري الإنجليزي', 'CL': 'دوري أبطال أوروبا', 'EC': 'بطولة أمم أوروبا', 'WC': 'كأس العالم', 'PD': 'الدوري الإسباني', 'BL1': 'الدوري الألماني', 'SA': 'الدوري الإيطالي', 'FL1': 'الدوري الفرنسي', 'PPL': 'الدوري البرتغالي', 'DED': 'الدوري الهولندي' };
    const brokenLogos = { '113': true };
    function setActiveTab(id) { document.querySelectorAll('.btn-tab').forEach(b => b.classList.remove('active')); document.getElementById(id).classList.add('active'); }
    function getDateString(offset = 0) { const d = new Date(); d.setDate(d.getDate() + offset); return d.toISOString().split('T')[0]; }
    function formatTime(iso) { const d = new Date(iso); let timeString = d.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true, timeZone: 'Asia/Riyadh' }); return timeString.replace('AM', 'صباحًا').replace('PM', 'مساءً'); }
    async function loadMatches(view='today') { setActiveTab(view); matchesContainer.innerHTML = `<div class="text-center py-12 text-slate-400">جاري تحميل المباريات...</div>`; try { const res = await fetch(API_URL + '?t=' + Date.now()); const data = await res.json(); renderMatches(data.response || [], view); } catch (err) { matchesContainer.innerHTML = `<div class="text-center py-12 text-red-400">فشل تحميل البيانات</div>`; } }
    function renderMatches(allMatches, view) { matchesContainer.innerHTML = ''; const offset = view === 'yesterday' ? -1 : view === 'tomorrow' ? 1 : 0; const target = getDateString(offset); let filtered = allMatches.filter(m => m.fixture.date && m.fixture.date.startsWith(target)); if (!filtered.length) { matchesContainer.innerHTML = `<div class="text-center py-12 text-slate-400">⚽ لا توجد مباريات لهذا اليوم</div>`; return; } filtered.forEach(match => { matchesContainer.innerHTML += renderMatchHTML(match); }); }
    function renderMatchHTML(match) { const status = match.fixture.status.short || 'NS'; let centerTop = '', centerBottom = ''; if (["LIVE", "HT"].includes(status)) { centerTop = `<div class="score-box text-emerald-400">${match.goals.home ?? 0} - ${match.goals.away ?? 0}</div>`; centerBottom = `<div class="status-text text-red-400">مباشر</div>`; } else if (["FT", "AET", "PEN"].includes(status)) { centerTop = `<div class="score-box">${match.goals.home ?? 0} - ${match.goals.away ?? 0}</div>`; centerBottom = `<div class="status-text">انتهت</div>`; } else { const formattedTime = formatTime(match.fixture.date); const timeParts = formattedTime.split(' '); centerTop = `<div class="score-box">${timeParts[0]}<span class="time-period">${timeParts[1]}</span></div>`; } const leagueNameAr = leagueTranslations[match.league.code] || match.league.name; const competitionInfo = `<div class="match-details"><span>🏆 ${leagueNameAr}</span><span>🏟️ ${match.fixture.venue || 'ملعب غير محدد'}</span></div>`; const homeLogo = brokenLogos[match.teams.home.id] ? 'default-logo.svg' : (match.teams.home.logo || 'default-logo.svg'); const awayLogo = brokenLogos[match.teams.away.id] ? 'default-logo.svg' : (match.teams.away.logo || 'default-logo.svg'); return `<div class="match-card p-4"><div class="grid grid-cols-3 items-center text-center"><div><img src="${homeLogo}" class="crest" onerror="this.src='default-logo.svg';"></div><div>${centerTop}</div><div><img src="${awayLogo}" class="crest" onerror="this.src='default-logo.svg';"></div></div><div class="grid grid-cols-3 items-center text-center mt-2"><div class="team-name">${match.teams.home.name}</div><div>${centerBottom}</div><div class="team-name">${match.teams.away.name}</div></div>${competitionInfo}</div>`; }
    ['yesterday', 'today', 'tomorrow'].forEach(id => document.getElementById(id).addEventListener('click', () => loadMatches(id)));
    loadMatches('today');
    setInterval(() => { if (document.getElementById('today').classList.contains('active')) loadMatches('today'); }, 60000);
  </script>
</body>
</html>
